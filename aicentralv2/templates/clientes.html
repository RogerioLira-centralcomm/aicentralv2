<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clientes - CentralComm AI</title>
</head>
<body>
    {% extends 'base_tailwind.html' %}

    {% block title %}Clientes - CentralComm AI{% endblock %}

    {% block content %}
<!-- Page Header -->
<div class="navbar bg-base-100 sticky top-0 z-30 shadow-sm">
  <div class="navbar-start">
    <!-- Breadcrumb -->
    <div class="text-sm breadcrumbs">
      <ul>
        <li><a href="{{ url_for('index') }}" class="text-primary"><i class="fas fa-home"></i></a></li>
        <li><span class="opacity-60">Comercial</span></li>
        <li class="font-medium">Clientes</li>
      </ul>
    </div>
  </div>
  
  <div class="navbar-center lg:flex">
    <div class="flex items-center space-x-2">
      <div class="avatar placeholder">
        <div class="bg-primary text-white rounded-lg w-10">
          <i class="fas fa-building text-lg"></i>
        </div>
      </div>
      <div>
        <h1 class="text-xl font-bold">Clientes</h1>
        <p class="text-xs opacity-60">Gerencie sua carteira de clientes</p>
      </div>
    </div>
  </div>
  
  <div class="navbar-end">
    <div class="flex items-center gap-2">
      <a href="{{ url_for('cliente_novo') }}" class="btn btn-primary btn-sm">
        <i class="fas fa-plus"></i>
        Novo Cliente
      </a>
      <div class="dropdown dropdown-end">
        <label tabindex="0" class="btn btn-ghost btn-sm">
          <i class="fas fa-ellipsis-v"></i>
        </label>
        <ul tabindex="0" class="dropdown-content z-[1] menu p-2 shadow bg-base-100 rounded-box w-52">
          <li><a><i class="fas fa-download w-4"></i>Exportar Lista</a></li>
          <li><a><i class="fas fa-file-excel w-4"></i>Relatório Excel</a></li>
        </ul>
      </div>
    </div>
  </div>
</div>

<!-- Stats Bar -->
<div class="bg-base-100 border-t border-base-200">
  <div class="container mx-auto p-4">
    <div class="stats stats-horizontal shadow w-full">
      <div class="stat">
        <div class="stat-figure text-primary">
          <i class="fas fa-building text-3xl"></i>
        </div>
        <div class="stat-title">Total Clientes</div>
        <div class="stat-value">{{ pessoas_stats.juridica.total + pessoas_stats.fisica.total }}</div>
        <div class="stat-desc">
          <span class="badge badge-primary badge-sm">PJ: {{ "%.1f"|format(100 * pessoas_stats.juridica.total / (pessoas_stats.juridica.total + pessoas_stats.fisica.total) if (pessoas_stats.juridica.total + pessoas_stats.fisica.total) > 0 else 0) }}%</span>
          <span class="badge badge-warning badge-sm ml-1">PF: {{ "%.1f"|format(100 * pessoas_stats.fisica.total / (pessoas_stats.juridica.total + pessoas_stats.fisica.total) if (pessoas_stats.juridica.total + pessoas_stats.fisica.total) > 0 else 0) }}%</span>
        </div>
      </div>
      
      <div class="stat">
        <div class="stat-figure text-success">
          <i class="fas fa-check-circle text-3xl"></i>
        </div>
        <div class="stat-title">Clientes Ativos</div>
        <div class="stat-value text-success">{{ pessoas_stats.juridica.ativos + pessoas_stats.fisica.ativos }}</div>
        <div class="stat-desc">Gerando receita</div>
      </div>
      
      <div class="stat">
        <div class="stat-figure text-warning">
          <i class="fas fa-users text-3xl"></i>
        </div>
        <div class="stat-title">Total Contatos</div>
        <div class="stat-value text-warning">{{ clientes|sum(attribute='total_contatos') if clientes else 0 }}</div>
        <div class="stat-desc">Pessoas conectadas</div>
      </div>
    </div>
  </div>
</div>

<!-- Search and Filters -->
<div class="bg-base-100 border-t border-base-200">
  <div class="container mx-auto p-4">
    <div class="flex flex-col lg:flex-row gap-4">
      <!-- Main Search -->
      <div class="form-control flex-1">
        <div class="input-group">
          <input type="text" 
                 id="searchInput"
                 placeholder="Buscar por nome, razão social ou CNPJ..." 
                 class="input input-bordered w-full" />
          <button class="btn btn-square btn-primary">
            <i class="fas fa-search"></i>
          </button>
        </div>
      </div>
      
      <!-- Filters -->
      <div class="flex gap-4">
        <select id="vendedorFilter" class="select select-bordered w-full max-w-xs">
          <option value="">Todos os Executivos</option>
          {% if vendedores_cc %}
            {% for vend in vendedores_cc %}
              <option value="{{ vend.id_contato_cliente }}" {% if filtro_vendas_central_comm and filtro_vendas_central_comm == vend.id_contato_cliente %}selected{% endif %}>
                {{ vend.nome_completo }}
              </option>
            {% endfor %}
          {% endif %}
        </select>

        <select id="statusFilter" class="select select-bordered w-full max-w-xs">
          <option value="todos">Status: Todos</option>
          <option value="false">Ativos</option>
          <option value="true">Inativos</option>
        </select>

        <select id="tipoFilter" class="select select-bordered w-full max-w-xs">
          <option value="todos">Tipo: Todos</option>
          <option value="PJ">Pessoa Jurídica</option>
          <option value="PF">Pessoa Física</option>
        </select>
      </div>
    </div>

    <!-- Active Filters -->
    <div class="flex flex-wrap gap-2 mt-4 empty:hidden">
      <div role="alert" class="alert alert-info py-2 px-4 cursor-pointer hover:bg-info/90">
        <i class="fas fa-user-tie"></i>
        <span>Executivo: João Silva</span>
        <button class="btn btn-sm btn-circle btn-ghost">✕</button>
      </div>
      <div role="alert" class="alert alert-success py-2 px-4 cursor-pointer hover:bg-success/90">
        <i class="fas fa-check-circle"></i>
        <span>Ativos</span>
        <button class="btn btn-sm btn-circle btn-ghost">✕</button>
      </div>
    </div>
  </div>
</div>

<div class="p-6">
    <!-- Flash Messages -->
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            <div class="mb-6 space-y-2">
                {% for category, message in messages %}
                    <div class="flex items-center p-3 rounded-lg shadow-sm animate-slide-up {% if category == 'error' %}bg-red-50 text-red-800 border border-red-200{% elif category == 'success' %}bg-green-50 text-green-800 border border-green-200{% elif category == 'warning' %}bg-yellow-50 text-yellow-800 border border-yellow-200{% else %}bg-blue-50 text-blue-800 border border-blue-200{% endif %}">
                        <div class="flex-shrink-0">
                            <i class="fas fa-{% if category == 'error' %}exclamation-circle{% elif category == 'success' %}check-circle{% elif category == 'warning' %}exclamation-triangle{% else %}info-circle{% endif %}"></i>
                        </div>
                        <span class="flex-1 ml-3 text-sm font-medium">{{ message }}</span>
                        <button onclick="closeFlashMessage(this)" class="ml-4 text-gray-400 hover:text-gray-600 transition-colors">
                            <i class="fas fa-times text-sm"></i>
                        </button>
                    </div>
                {% endfor %}
            </div>
        {% endif %}
    {% endwith %}

        <!-- Flex Container -->
        <div class="flex flex-col xl:flex-row gap-6">
            <!-- Main Content -->
            <div class="flex-grow min-w-0 xl:w-3/4">
                <div class="bg-white rounded-lg shadow-card w-full">
                    {% if clientes %}
                <!-- Search and Filter Box -->
                <div class="p-6 border-b border-gray-200 bg-white">
                    <div class="flex flex-col lg:flex-row gap-4">
                        <!-- Filtro por Vendas CentralComm (Executivo) -->
                        <div class="lg:w-72">
                            <label class="block text-sm font-medium text-gray-700 mb-1.5">
                                <i class="fas fa-user-tie text-primary mr-1.5"></i>
                                Executivo Responsável
                            </label>
                            <div class="relative">
                                <select id="vendedorFilter" class="w-full py-2.5 pl-4 pr-10 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all appearance-none bg-white text-gray-700">
                                    <option value="">Todos os Executivos</option>
                                    {% if vendedores_cc %}
                                        {% for vend in vendedores_cc %}
                                            <option value="{{ vend.id_contato_cliente }}" {% if filtro_vendas_central_comm and filtro_vendas_central_comm == vend.id_contato_cliente %}selected{% endif %}>{{ vend.nome_completo }}</option>
                                        {% endfor %}
                                    {% endif %}
                                </select>
                                <i class="fas fa-chevron-down absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none text-sm"></i>
                            </div>
                        </div>

                        <!-- Filtros Secundários -->
                        <div class="flex-1 flex flex-col lg:flex-row gap-4">
                            <!-- Search Input -->
                            <div class="flex-1">
                                <label class="block text-sm font-medium text-gray-700 mb-1.5">
                                    <i class="fas fa-search text-gray-400 mr-1.5"></i>
                                    Buscar Cliente
                                </label>
                                <div class="relative">
                                    <input 
                                        type="text" 
                                        id="searchInput" 
                                        class="w-full pl-11 pr-4 py-2.5 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all" 
                                        placeholder="Digite o nome ou razão social..."
                                        autocomplete="off"
                                    >
                                    <i class="fas fa-search absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                                </div>
                            </div>
                            
                            <!-- Filtros Rápidos -->
                            <div class="flex gap-2">
                                <div class="flex-1 lg:w-44">
                                    <label class="block text-sm font-medium text-gray-700 mb-1.5">
                                        <i class="fas fa-filter text-gray-400 mr-1.5"></i>
                                        Status
                                    </label>
                                    <select id="statusFilter" class="w-full py-2.5 px-4 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all appearance-none bg-white text-gray-700">
                                        <option value="todos">Todos</option>
                                        <option value="false">Ativos</option>
                                        <option value="true">Inativos</option>
                                    </select>
                                </div>
                                
                                <div class="flex-1 lg:w-44">
                                    <label class="block text-sm font-medium text-gray-700 mb-1.5">
                                        <i class="fas fa-building text-gray-400 mr-1.5"></i>
                                        Tipo
                                    </label>
                                    <select id="tipoFilter" class="w-full py-2.5 px-4 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all appearance-none bg-white text-gray-700">
                                        <option value="todos">Todos</option>
                                        <option value="PJ">Pessoa Jurídica</option>
                                        <option value="PF">Pessoa Física</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Tags de Filtro Ativo -->
                    <div class="flex flex-wrap gap-2 mt-4 empty:hidden">
                        <div class="inline-flex items-center px-3 py-1 rounded-full text-sm bg-primary/10 text-primary">
                            <span class="mr-2">Executivo: João Silva</span>
                            <button class="hover:text-primary-dark"><i class="fas fa-times"></i></button>
                        </div>
                        <div class="inline-flex items-center px-3 py-1 rounded-full text-sm bg-green-50 text-green-600">
                            <span class="mr-2">Ativos</span>
                            <button class="hover:text-green-700"><i class="fas fa-times"></i></button>
                        </div>
                    </div>
                </div>

                <!-- Table Container -->
                <div class="bg-base-100 shadow-xl rounded-box">
                    <div class="overflow-x-auto">
                        <table class="table table-zebra">
                            <thead>
                                <tr>
                                    <th class="w-[40%]">
                                        <button class="flex items-center gap-2">
                                            Cliente
                                            <i class="fas fa-sort opacity-50"></i>
                                        </button>
                                    </th>
                                    <th class="w-[25%]">
                                        <button class="flex items-center gap-2">
                                            Executivo
                                            <i class="fas fa-sort opacity-50"></i>
                                        </button>
                                    </th>
                                    <th class="w-[20%]">Tipo / Status</th>
                                    <th class="w-[15%] text-right">Ações</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for cliente in clientes %}
                                <tr>
                                    <td>
                                        <div class="flex gap-3">
                                            <div class="avatar placeholder">
                                                <div class="w-12 rounded-lg {% if cliente.tipo_pessoa == 'PJ' %}bg-primary/10 text-primary{% else %}bg-warning/10 text-warning{% endif %}">
                                                    <i class="fas fa-{% if cliente.tipo_pessoa == 'PJ' %}building{% else %}user{% endif %} text-lg"></i>
                                                </div>
                                            </div>
                                            <div>
                                                <div class="font-bold">{{ cliente.nome_fantasia or cliente.razao_social }}</div>
                                                {% if cliente.nome_fantasia %}
                                                <div class="text-sm opacity-60">{{ cliente.razao_social }}</div>
                                                {% endif %}
                                                <div class="flex gap-2 mt-1">
                                                    <div class="badge badge-info badge-sm gap-1">
                                                        <i class="fas fa-users text-[10px]"></i>
                                                        {{ cliente.total_contatos }}
                                                    </div>
                                                    {% if cliente.agencia_key %}
                                                    <div class="badge badge-secondary badge-sm gap-1">
                                                        <i class="fas fa-briefcase text-[10px]"></i>
                                                        Agência
                                                    </div>
                                                    {% endif %}
                                                </div>
                                            </div>
                                        </div>
                                    </td>
                                    <td>
                                        {% if cliente.executivo %}
                                        <div class="flex items-center gap-3">
                                            <div class="avatar placeholder">
                                                <div class="w-8 rounded-full bg-neutral-focus text-neutral-content">
                                                    <span>{{ cliente.executivo.nome_completo[:2].upper() }}</span>
                                                </div>
                                            </div>
                                            <div>
                                                <div class="font-bold">{{ cliente.executivo.nome_completo }}</div>
                                                <div class="text-sm opacity-60">Vendas CentralComm</div>
                                            </div>
                                        </div>
                                        {% else %}
                                        <div class="flex items-center gap-3">
                                            <div class="avatar placeholder">
                                                <div class="w-8 rounded-full bg-base-300">
                                                    <i class="fas fa-user-slash opacity-50"></i>
                                                </div>
                                            </div>
                                            <div class="text-sm opacity-60">Não atribuído</div>
                                        </div>
                                        {% endif %}
                                    </td>
                                    <td>
                                        <div class="flex flex-col gap-2">
                                            <div class="badge {% if cliente.tipo_pessoa == 'PJ' %}badge-primary{% else %}badge-warning{% endif %} gap-1">
                                                <i class="fas fa-{% if cliente.tipo_pessoa == 'PJ' %}building{% else %}user{% endif %} text-[10px]"></i>
                                                {{ cliente.tipo_pessoa }}
                                            </div>
                                            <div class="badge {% if cliente.status %}badge-success{% else %}badge-error{% endif %} gap-1">
                                                <i class="fas fa-{% if cliente.status %}check{% else %}times{% endif %} text-[10px]"></i>
                                                {{ 'Ativo' if cliente.status else 'Inativo' }}
                                            </div>
                                        </div>
                                    </td>
                                    <td class="text-right">
                                        <div class="join">
                                            <button class="btn btn-sm join-item" onclick="clientDetailsSidebar.open('{{ cliente.id_cliente }}')">
                                                <i class="fas fa-eye"></i>
                                            </button>
                                            <div class="dropdown dropdown-end">
                                                <label tabindex="0" class="btn btn-sm join-item">
                                                    <i class="fas fa-ellipsis-v"></i>
                                                </label>
                                                <ul tabindex="0" class="dropdown-content z-[1] menu p-2 shadow bg-base-100 rounded-box w-52">
                                                    <li>
                                                        <a href="{{ url_for('cliente_editar', cliente_id=cliente.id_cliente) }}">
                                                            <i class="fas fa-edit"></i>Editar
                                                        </a>
                                                    </li>
                                                    {% if cliente.nome_fantasia.upper() != 'CENTRALCOMM' %}
                                                    <li>
                                                        <form method="POST" action="{{ url_for('cliente_toggle_status', cliente_id=cliente.id_cliente) }}">
                                                            <button type="submit" class="w-full text-left">
                                                                <i class="fas fa-{% if not cliente.status %}check text-success{% else %}ban text-error{% endif %}"></i>
                                                                {% if not cliente.status %}Ativar{% else %}Desativar{% endif %}
                                                            </button>
                                                        </form>
                                                    </li>
                                                    {% endif %}
                                                    <li><a><i class="fas fa-user-tie"></i>Alterar Executivo</a></li>
                                                </ul>
                                            </div>
                                        </div>
                                    </td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                    
                    <!-- Table Footer with Pagination -->
                    <div class="flex justify-between items-center p-4 border-t">
                        <div class="text-sm opacity-60">Mostrando 1-10 de 100 clientes</div>
                        <div class="join">
                            <button class="join-item btn btn-sm" disabled>«</button>
                            <button class="join-item btn btn-sm btn-active">1</button>
                            <button class="join-item btn btn-sm">2</button>
                            <button class="join-item btn btn-sm">3</button>
                            <button class="join-item btn btn-sm">»</button>
                        </div>
                    </div>
                </div>

                <!-- No Results Message -->
                <div class="p-8 text-center hidden" id="noResults">
                    <i class="fas fa-search text-4xl text-gray-300 mb-4"></i>
                    <p class="text-lg text-gray-600 mb-4">Nenhum cliente encontrado com esse termo de pesquisa.</p>
                    <button onclick="clearSearch()" class="inline-flex items-center px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors duration-200">
                        <i class="fas fa-times mr-2"></i>
                        Limpar Pesquisa
                    </button>
                </div>
            {% else %}
                <div class="p-12 text-center">
                    <i class="fas fa-inbox text-6xl text-gray-300 mb-4"></i>
                    <p class="text-xl text-gray-600 mb-6">Nenhum cliente cadastrado</p>
                    <a href="{{ url_for('cliente_novo') }}" class="inline-flex items-center px-6 py-3 bg-primary text-white rounded-lg hover:bg-primary-light transition-colors duration-200 shadow-md">
                        <i class="fas fa-plus mr-2"></i>
                        Cadastrar Primeiro Cliente
                    </a>
                </div>
            {% endif %}
        </div>
    </div>
    {% endblock %}

    {% block sidebar %}
<!-- Dynamic Client Details Sidebar -->
<div id="clientDetailsSidebar" class="hidden fixed right-0 top-0 h-full w-96 bg-white shadow-xl border-l border-gray-200 transform transition-transform duration-300 z-40">
    <!-- Sidebar Header -->
    <div class="px-6 py-4 border-b border-gray-200 flex items-center justify-between bg-gray-50">
        <div class="flex items-center min-w-0">
            <div class="w-10 h-10 rounded-lg flex items-center justify-center mr-3" id="clientTypeIcon">
                <!-- Icon will be dynamically set -->
            </div>
            <div class="truncate">
                <h3 class="font-semibold text-gray-900 truncate" id="clientName">Selecione um cliente</h3>
                <p class="text-sm text-gray-500 truncate" id="clientId"></p>
            </div>
        </div>
        <button onclick="closeClientDetails()" class="p-2 hover:bg-gray-100 rounded-lg transition-colors">
            <i class="fas fa-times text-gray-400"></i>
        </button>
    </div>

    <!-- Tabs Navigation -->
    <div class="px-6 pt-4 border-b border-gray-200">
        <div class="flex space-x-4" role="tablist">
            <button class="px-3 py-2 text-sm font-medium text-primary border-b-2 border-primary" role="tab" data-tab="cadu">
                <i class="fas fa-file-alt mr-2"></i>CADU
            </button>
            <button class="px-3 py-2 text-sm font-medium text-gray-500 border-b-2 border-transparent hover:text-gray-700" role="tab" data-tab="cotacoes">
                <i class="fas fa-calculator mr-2"></i>Cotações
            </button>
            <button class="px-3 py-2 text-sm font-medium text-gray-500 border-b-2 border-transparent hover:text-gray-700" role="tab" data-tab="operacao">
                <i class="fas fa-cogs mr-2"></i>Operação
            </button>
            <button class="px-3 py-2 text-sm font-medium text-gray-500 border-b-2 border-transparent hover:text-gray-700" role="tab" data-tab="financeiro">
                <i class="fas fa-dollar-sign mr-2"></i>Financeiro
            </button>
        </div>
    </div>

    <!-- Tab Contents -->
    <div class="overflow-y-auto" style="height: calc(100vh - 8rem);">
        <!-- CADU Tab -->
        <div class="p-6" id="tab-cadu" role="tabpanel">
            <!-- Status Card -->
            <div class="stats stats-vertical shadow w-full bg-base-100 mb-6">
                <div class="stat">
                    <div class="stat-title text-xs">Status do Cliente</div>
                    <div class="stat-value text-success text-lg">Ativo</div>
                    <div class="stat-desc text-xs">Desde Jan 2023</div>
                </div>
                <div class="stat">
                    <div class="stat-title text-xs">Último Contato</div>
                    <div class="stat-value text-lg">15 dias</div>
                    <div class="stat-desc text-xs text-warning">Agendar follow-up</div>
                </div>
            </div>

            <!-- Informações Básicas -->
            <div class="card bg-base-100 shadow-sm mb-6">
                <div class="card-body p-4">
                    <h3 class="card-title text-sm mb-4">
                        <i class="fas fa-info-circle mr-2 text-primary"></i>
                        Informações Básicas
                    </h3>
                    <div class="grid grid-cols-2 gap-4">
                        <div class="form-control">
                            <label class="label">
                                <span class="label-text text-xs">CNPJ</span>
                            </label>
                            <input type="text" value="00.000.000/0001-00" class="input input-sm input-bordered" disabled />
                        </div>
                        <div class="form-control">
                            <label class="label">
                                <span class="label-text text-xs">Inscrição Estadual</span>
                            </label>
                            <input type="text" value="123.456.789" class="input input-sm input-bordered" disabled />
                        </div>
                    </div>
                    <div class="divider my-2"></div>
                    <div class="space-y-2">
                        <div class="flex justify-between items-center">
                            <span class="text-sm opacity-75">Segmento</span>
                            <span class="badge badge-primary">Tecnologia</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-sm opacity-75">Porte</span>
                            <span class="badge badge-ghost">Médio</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Contatos -->
            <div class="card bg-base-100 shadow-sm mb-6">
                <div class="card-body p-4">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="card-title text-sm">
                            <i class="fas fa-users mr-2 text-primary"></i>
                            Contatos
                        </h3>
                        <button class="btn btn-sm btn-ghost btn-square">
                            <i class="fas fa-plus"></i>
                        </button>
                    </div>
                    <div class="space-y-3">
                        <!-- Contato Card -->
                        <div class="card card-compact card-bordered">
                            <div class="card-body">
                                <div class="flex items-start justify-between">
                                    <div class="flex items-center space-x-3">
                                        <div class="avatar placeholder">
                                            <div class="bg-primary text-white rounded-full w-8">
                                                <span class="text-xs">JD</span>
                                            </div>
                                        </div>
                                        <div>
                                            <h4 class="font-medium text-sm">João da Silva</h4>
                                            <p class="text-xs text-gray-500">Diretor de Tecnologia</p>
                                        </div>
                                    </div>
                                    <div class="dropdown dropdown-end">
                                        <label tabindex="0" class="btn btn-ghost btn-xs btn-square">
                                            <i class="fas fa-ellipsis-v"></i>
                                        </label>
                                        <ul tabindex="0" class="dropdown-content z-[1] menu p-2 shadow bg-base-100 rounded-box w-52">
                                            <li><a><i class="fas fa-edit w-4"></i> Editar</a></li>
                                            <li><a><i class="fas fa-trash w-4"></i> Remover</a></li>
                                        </ul>
                                    </div>
                                </div>
                                <div class="flex gap-2 mt-2">
                                    <button class="btn btn-xs btn-outline gap-1">
                                        <i class="fas fa-phone text-[10px]"></i>
                                        Ligar
                                    </button>
                                    <button class="btn btn-xs btn-outline gap-1">
                                        <i class="fas fa-envelope text-[10px]"></i>
                                        Email
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Timeline -->
            <div class="card bg-base-100 shadow-sm">
                <div class="card-body p-4">
                    <h3 class="card-title text-sm mb-4">
                        <i class="fas fa-history mr-2 text-primary"></i>
                        Histórico de Atividades
                    </h3>
                    <ul class="timeline timeline-vertical timeline-compact">
                        <li>
                            <div class="timeline-start text-xs">13:00</div>
                            <div class="timeline-middle">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5 text-primary"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm.75-13a.75.75 0 00-1.5 0v5c0 .414.336.75.75.75h4a.75.75 0 000-1.5h-3.25V5z" clip-rule="evenodd" /></svg>
                            </div>
                            <div class="timeline-end timeline-box">
                                <p class="text-sm">Reunião de follow-up agendada</p>
                                <p class="text-xs text-gray-500">Agendado por Maria Silva</p>
                            </div>
                        </li>
                        <li>
                            <div class="timeline-start text-xs">10:30</div>
                            <div class="timeline-middle">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5 text-success"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z" clip-rule="evenodd" /></svg>
                            </div>
                            <div class="timeline-end timeline-box">
                                <p class="text-sm">Proposta aprovada</p>
                                <p class="text-xs text-gray-500">Valor: R$ 15.000,00</p>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Cotações Tab -->
        <div class="p-6 hidden" id="tab-cotacoes" role="tabpanel">
            <!-- Stats Summary -->
            <div class="stats shadow w-full bg-base-100 mb-6">
                <div class="stat">
                    <div class="stat-title">Total Cotações</div>
                    <div class="stat-value">89</div>
                    <div class="stat-desc">↗︎ 14% (30 dias)</div>
                </div>
                <div class="stat">
                    <div class="stat-title">Taxa Aprovação</div>
                    <div class="stat-value text-success">78%</div>
                    <div class="stat-desc">↗︎ 8% (30 dias)</div>
                </div>
                <div class="stat">
                    <div class="stat-title">Ticket Médio</div>
                    <div class="stat-value">R$ 12k</div>
                    <div class="stat-desc">↘︎ 2% (30 dias)</div>
                </div>
            </div>

            <!-- Recent Quotes -->
            <div class="card bg-base-100 shadow-sm mb-6">
                <div class="card-body p-4">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="card-title text-sm">Cotações Recentes</h3>
                        <button class="btn btn-sm btn-primary">Nova Cotação</button>
                    </div>
                    <div class="overflow-x-auto">
                        <table class="table table-zebra">
                            <thead>
                                <tr>
                                    <th>Data</th>
                                    <th>Serviço</th>
                                    <th>Valor</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>2023-11-05</td>
                                    <td>Mídia Programática</td>
                                    <td>R$ 15.000</td>
                                    <td><div class="badge badge-success gap-1"><i class="fas fa-check text-[10px]"></i>Aprovada</div></td>
                                </tr>
                                <tr>
                                    <td>2023-11-01</td>
                                    <td>Gestão de Redes</td>
                                    <td>R$ 8.000</td>
                                    <td><div class="badge badge-warning gap-1"><i class="fas fa-clock text-[10px]"></i>Pendente</div></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- Operação Tab -->
        <div class="p-6 hidden" id="tab-operacao" role="tabpanel">
            <!-- Current Status -->
            <div class="card bg-base-100 shadow-sm mb-6">
                <div class="card-body">
                    <h3 class="card-title text-sm mb-4">Status da Operação</h3>
                    <div class="flex justify-between mb-2">
                        <span class="text-sm">Progresso Geral</span>
                        <span class="text-sm font-medium">75%</span>
                    </div>
                    <progress class="progress progress-success w-full" value="75" max="100"></progress>
                    
                    <!-- Status Cards -->
                    <div class="grid grid-cols-2 gap-4 mt-4">
                        <div class="stats bg-base-200">
                            <div class="stat">
                                <div class="stat-title text-xs">Campanhas Ativas</div>
                                <div class="stat-value text-primary text-2xl">4</div>
                            </div>
                        </div>
                        <div class="stats bg-base-200">
                            <div class="stat">
                                <div class="stat-title text-xs">Performance</div>
                                <div class="stat-value text-success text-2xl">92%</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Operation Steps -->
            <div class="card bg-base-100 shadow-sm">
                <div class="card-body">
                    <h3 class="card-title text-sm mb-4">Fluxo de Operação</h3>
                    <ul class="steps steps-vertical">
                        <li class="step step-primary" data-content="✓">
                            <div class="text-left ml-4">
                                <p class="font-medium">Onboarding</p>
                                <p class="text-xs text-gray-500">Concluído em 01/11/2023</p>
                            </div>
                        </li>
                        <li class="step step-primary" data-content="✓">
                            <div class="text-left ml-4">
                                <p class="font-medium">Setup de Campanhas</p>
                                <p class="text-xs text-gray-500">Concluído em 03/11/2023</p>
                            </div>
                        </li>
                        <li class="step step-primary">
                            <div class="text-left ml-4">
                                <p class="font-medium">Otimização</p>
                                <p class="text-xs text-gray-500">Em andamento</p>
                            </div>
                        </li>
                        <li class="step">
                            <div class="text-left ml-4">
                                <p class="font-medium">Review Mensal</p>
                                <p class="text-xs text-gray-500">Previsto para 30/11/2023</p>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Financeiro Tab -->
        <div class="p-6 hidden" id="tab-financeiro" role="tabpanel">
            <!-- Financial Summary -->
            <div class="stats stats-vertical shadow w-full bg-base-100 mb-6">
                <div class="stat">
                    <div class="stat-title">Faturamento Total</div>
                    <div class="stat-value text-primary">R$ 89,400</div>
                    <div class="stat-desc">Jan - Nov 2023</div>
                </div>
                <div class="stat">
                    <div class="stat-title">Status de Pagamento</div>
                    <div class="stat-value text-success">Em Dia</div>
                    <div class="stat-desc">Última fatura: 05/11/2023</div>
                </div>
            </div>

            <!-- Recent Transactions -->
            <div class="card bg-base-100 shadow-sm mb-6">
                <div class="card-body">
                    <h3 class="card-title text-sm mb-4">Transações Recentes</h3>
                    <div class="overflow-x-auto">
                        <table class="table table-zebra">
                            <tbody>
                                <tr>
                                    <td>
                                        <div class="flex items-center space-x-3">
                                            <div class="avatar placeholder">
                                                <div class="bg-green-100 text-green-600 rounded-full w-8">
                                                    <i class="fas fa-arrow-down"></i>
                                                </div>
                                            </div>
                                            <div>
                                                <div class="font-bold">Pagamento Recebido</div>
                                                <div class="text-sm opacity-50">05/11/2023</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="text-right">
                                        <span class="text-success font-medium">+ R$ 15.000</span>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <div class="flex items-center space-x-3">
                                            <div class="avatar placeholder">
                                                <div class="bg-orange-100 text-orange-600 rounded-full w-8">
                                                    <i class="fas fa-clock"></i>
                                                </div>
                                            </div>
                                            <div>
                                                <div class="font-bold">Fatura Emitida</div>
                                                <div class="text-sm opacity-50">01/11/2023</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="text-right">
                                        <span class="text-warning font-medium">R$ 12.000</span>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Payment Schedule -->
            <div class="card bg-base-100 shadow-sm">
                <div class="card-body">
                    <h3 class="card-title text-sm mb-4">Próximos Vencimentos</h3>
                    <div class="timeline">
                        <div class="timeline-item">
                            <div class="timeline-content card card-compact card-bordered mb-4">
                                <div class="card-body">
                                    <div class="flex justify-between items-center">
                                        <div>
                                            <h4 class="font-medium">Fatura #2023/11</h4>
                                            <p class="text-sm text-gray-500">Vencimento em 15/11/2023</p>
                                        </div>
                                        <span class="text-lg font-medium">R$ 12.000</span>
                                    </div>
                                    <div class="flex gap-2 mt-3">
                                        <button class="btn btn-sm btn-primary gap-2">
                                            <i class="fas fa-file-invoice"></i>
                                            Ver Fatura
                                        </button>
                                        <button class="btn btn-sm btn-ghost gap-2">
                                            <i class="fas fa-history"></i>
                                            Histórico
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

    {% block scripts %}
    <script src="{{ url_for('static', filename='js/clientes.js') }}"></script>
    {% endblock %}
</body>
</html>